on: push

jobs:
  test:
    strategy:
      matrix:
        os:
          - {'runner': 'ubuntu-latest'}
        include:
          - os: {'runner': 'ubuntu-latest'}
            gui: 'gnome'
        exclude:
          # ERROR: Unknown key
          - operating-system: {'runner': 'ubuntu-latest'}
          # ERROR: Type mismatch object v.s. string
          - os: 'ubuntu-latest'
          # ERROR: Type mismatch object v.s. array
          - os: ['ubuntu-latest']
          # ERROR: Type mismatch object v.s. array
          - os: {'runner': {'name': 'ubuntu-latest'}}
          # ERROR: Unknown value
          - os: {'runner': 'windows-latest'}
          # ERROR: Type mismatch in key added by `include`
          - os: {'runner': 'ubuntu-latest'}
            gui: ['gnome']
          # ERROR: Unknown value in key added by `include`
          - os: {'runner': 'ubuntu-latest'}
            gui: 'kde'
    runs-on: ${{ matrix.os.runner }}
    steps:
      - run: echo ${{ matrix.gui }}
